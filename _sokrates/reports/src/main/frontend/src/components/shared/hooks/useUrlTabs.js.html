<html>
<head>
    <title>frontend/src/components/shared/hooks/useUrlTabs.js</title>
    <style type="text/css" media="screen">
        #editor {
            position: absolute;
            top: 40px;
            right: 0;
            bottom: 0;
            left: 0;
        }
    </style>
</head>
<body style="font-family: 'DejaVu Sans', Arial, Helvetica, sans-serif">
<h3 style="margin-bottom: 0">frontend/src/components/shared/hooks/useUrlTabs.js (<b>23</b> lines of code) (<a href="useUrlTabs.js">raw</a>):</h3>
<div id="editor">import { useEffect, useMemo } from &quot;react&quot;;
import { useSearchParams } from &quot;react-router-dom&quot;;

/**
 * Synchronise l'onglet actif avec ?tab= dans l'URL.
 * tabs: liste des ids d&rsquo;onglets, defaultTab: onglet par d&eacute;faut.
 */
export function useUrlTabs(tabs = [], defaultTab = tabs[0] ?? &quot;default&quot;) {
  const [searchParams, setSearchParams] = useSearchParams();

  const activeTab = useMemo(() =&gt; {
    const t = searchParams.get(&quot;tab&quot;);
    return t &amp;&amp; tabs.includes(t) ? t : defaultTab;
  }, [searchParams, tabs, defaultTab]);

  useEffect(() =&gt; {
    const current = searchParams.get(&quot;tab&quot;);
    if (!current || !tabs.includes(current)) {
      const sp = new URLSearchParams(searchParams);
      sp.set(&quot;tab&quot;, activeTab);
      setSearchParams(sp, { replace: true });
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [activeTab]);

  const setActiveTab = (tabId) =&gt; {
    const sp = new URLSearchParams(searchParams);
    sp.set(&quot;tab&quot;, tabId);
    setSearchParams(sp);
  };

  return { activeTab, setActiveTab, searchParams };
}
</div>
<script src="https://www.zeljkoobrenovic.com/tools/common/lib/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("editor");
    editor.session.setMode("ace/mode/javascript");
    editor.setTheme("ace/theme/xcode");
    editor.setReadOnly(true);
    editor.setOption("wrap", true);
    editor.setPrintMarginColumn(120);
</script>
</body>
